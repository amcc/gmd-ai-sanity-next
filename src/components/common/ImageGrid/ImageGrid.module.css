.imageGrid {
  /* padding-top: var(--fib1); */
}
.grid {
  display: grid;
  /* grid-template-rows: 1fr auto; */
  grid-template-columns: repeat(1, 1fr);
  gap: var(--grid-gap);
  margin-top: calc(var(--page-padding) * 2);

  @mixin tablet {
    grid-template-columns: repeat(2, 1fr);
  }
  @mixin desktop {
    grid-template-columns: repeat(2, 1fr);
  }
  @mixin widescreen {
    grid-template-columns: repeat(3, 1fr);
  }

  a {
    text-decoration: none;
  }
}

/* Enable hover only on non-touch devices */
@mixin hover {
  .grid a:hover {
    .grid-title {
      color: var(--color-secondary);
    }

    .grid-date {
      text-decoration: none;
    }

    /* Set CSS custom property for category hover */
    --category-hover: 1;
  }
}

.gridItem {
  position: relative;
  width: 100%;
  overflow: hidden;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  margin-bottom: var(--grid-margin-bottom);
  /* No min-height on mobile - let content determine size */

  @mixin tablet {
    min-height: auto; /* Reset for tablet+ where we have multiple columns */
  }
}

.gridItem .link {
  width: 100%;
}

.gridItem figure {
  margin: 0;
  width: 100%;
  display: grid;
  grid-template-rows: auto auto; /* Both rows size to content - no height constraints */
  gap: 8px;
  align-items: center;
  /* Remove max-height to prevent letterboxing */

  @mixin tablet {
    height: 100%; /* Fill available height on larger screens */
    grid-template-rows: 1fr auto; /* Image takes available space, caption sizes to content */
  }
}

.gridItem figure > div {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  min-height: 0; /* Allow shrinking */
  width: 100%; /* Ensure wrapper takes full width */
  > div {
    width: 100%;
  }
}

.gridItem figcaption {
  grid-row: 2;
  padding: 8px 0;
  font-weight: var(--grid-title-weight);
}

.gridItem img,
.gridItem picture {
  width: 100%;
  /* height: 60vh;  */
  object-fit: contain; /* This should prevent cropping while respecting the height */

  @mixin tablet {
    width: 100%;
    height: auto;
    object-fit: contain;
    max-height: none; /* Remove height restriction on larger screens */
  }
}

.categories {
  margin-top: 16px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.category {
  /* Use CSS custom property for hover state, fallback to 0 */
  opacity: var(--category-hover, 0);
}
.showCategories .category {
  opacity: 1;
}

/* Priority figure styles for grid items */
.gridItem :global(.priorityFigure) {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr;
  gap: var(--page-padding);
  align-items: start;

  @mixin tablet {
    grid-template-rows: 1fr; /* Override the tablet behavior */
  }

  /* Force children to be placed in the correct grid positions */
  > div:first-child {
    grid-column: 1;
    grid-row: 1;
  }

  > figcaption {
    grid-column: 2;
    grid-row: 1;
  }
}

.description {
  /* display: none;
  @mixin tablet {
    display: block;
  } */
}
